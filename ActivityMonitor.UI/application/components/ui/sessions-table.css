table.sessions {
  width: 100%;
  border-collapse: collapse;

  --link-color: rgba(var(--primary-color) / 0.3);

  tr {
    border-bottom: 1px solid rgb(var(--primary-color) / 0.3);
  }

  th,
  td {
    padding: 10px 8px;
    text-align: left;
  }

  thead {
    font-family: "Roboto Condensed", sans-serif;
    font-size: 1.15em;
  }

  tbody {
    tr {
      transition: background-color 0.1s ease-in-out;
    }
    tr:hover {
      background-color: rgba(var(--primary-color) / 0.03);
    }
    /* Workaround: tr cannot use position: relative reliably, so we use the last td */
    td:last-child {
      position: relative;
      overflow: hidden; /* optional, ensures overlay stays inside rounded corners if any */
    }

    tr[data-shift] td:last-child::after {
      content: "";
      position: absolute;
      right: 12px;
      width: 14px;
      background-color: var(--link-color);
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-size: 100% 100%;
      mask-size: 100% 100%;
    }

    tr[data-shift="in"],
    tr[data-shift="in-out"] {
      border-bottom: 1px solid rgb(var(--primary-color) / 0.2);
      border-bottom-style: dashed;
    }

    /* ============================ */
    tr[data-shift="out"] td.shift-in,
    tr[data-shift="out"] td.shift-out,
    tr[data-shift="out"] td.checkout,
    tr[data-shift="out"] td.duration span:first-child,
    /* ============================ */
    tr[data-shift="in"] td.shift-in,
    tr[data-shift="in"] td.shift-out,
    tr[data-shift="in"] td.check-in,
    tr[data-shift="in"] td.duration span:first-child,
    /* ============================ */
    tr[data-shift="in-out"] td.check-in,
    tr[data-shift="in-out"] td.checkout,
    tr[data-shift="in-out"] td.duration {
      color: var(--link-color);
    }

    /* Out: Top-Horizontal + Right-Vertical (Connects Down) */
    /* Shape: Starts Left, goes Right, curves Down, goes Bottom */
    tr[data-shift="in"] td:last-child::after {
      height: 50%;
      bottom: 0;
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 14 20" xmlns="http://www.w3.org/2000/svg"><path d="M 0,2 H 8 A 4,4 0 0 1 12,6 V 20" fill="none" stroke="black" stroke-width="2" vector-effect="non-scaling-stroke"/></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 14 20" xmlns="http://www.w3.org/2000/svg"><path d="M 0,2 H 8 A 4,4 0 0 1 12,6 V 20" fill="none" stroke="black" stroke-width="2" vector-effect="non-scaling-stroke"/></svg>');
    }

    /* In: Bottom-Horizontal + Right-Vertical (Connects Up) */
    /* Shape: Starts Left, goes Right, curves Up, goes Top */
    tr[data-shift="out"] td:last-child::after {
      height: 50%;
      top: 0;
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 14 20" xmlns="http://www.w3.org/2000/svg"><path d="M 0,18 H 8 A 4,4 0 0 0 12,14 V 0" fill="none" stroke="black" stroke-width="2" vector-effect="non-scaling-stroke"/></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 14 20" xmlns="http://www.w3.org/2000/svg"><path d="M 0,18 H 8 A 4,4 0 0 0 12,14 V 0" fill="none" stroke="black" stroke-width="2" vector-effect="non-scaling-stroke"/></svg>');
    }

    /* In-Out: T-Shape (Connects Both) */
    /* Shape: Full Vertical Right + Middle Horizontal Left */
    tr[data-shift="in-out"] td:last-child::after {
      height: 100%;
      top: 0;
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 14 40" xmlns="http://www.w3.org/2000/svg"><path d="M 12,0 V 40 M 0,20 H 12" fill="none" stroke="black" stroke-width="2" vector-effect="non-scaling-stroke"/></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 14 40" xmlns="http://www.w3.org/2000/svg"><path d="M 12,0 V 40 M 0,20 H 12" fill="none" stroke="black" stroke-width="2" vector-effect="non-scaling-stroke"/></svg>');
    }
  }
}
